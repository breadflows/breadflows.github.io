<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Webhook Manager</title>
    <style>
        /* ... (keep previous styles) ... */

        .id-panel {
            background-color: var(--background-tertiary);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .id-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: var(--background-secondary);
            margin: 5px 0;
            border-radius: 5px;
        }

        .copy-icon {
            cursor: pointer;
            margin-left: 10px;
            color: var(--brand);
            transition: color 0.2s;
        }

        .copy-icon:hover {
            color: #4752c4;
        }

        .latest-id {
            border: 2px solid var(--green);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ... (previous sections remain same) ... -->

        <!-- Message ID Panel -->
        <div class="section">
            <h2>Recent Message IDs</h2>
            <div class="id-panel" id="idPanel">
                <!-- IDs will be populated here -->
            </div>
        </div>
    </div>

    <script>
        // ... (keep previous variables and functions) ... 

        function updateIdPanel() {
            const idPanel = document.getElementById('idPanel');
            idPanel.innerHTML = messageHistory.map((msg, index) => `
                <div class="id-display ${index === 0 ? 'latest-id' : ''}">
                    <span class="message-id">${msg.id}</span>
                    <div>
                        <span class="copy-icon" onclick="copyToClipboard('${msg.id}')">ðŸ“‹</span>
                        <span class="status-indicator ${msg.status}"></span>
                    </div>
                </div>
            `).join('');
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text)
                .then(() => showNotification('Copied to clipboard!', 'var(--green)'))
                .catch(() => showNotification('Copy failed', 'var(--red)'));
        }

        async function sendMessage() {
            if (!webhookUrl) return showNotification('Please set webhook URL first!', 'var(--red)');
            
            const content = document.getElementById('messageContent').value;
            if (!content) return showNotification('Enter message content!', 'var(--red)');

            try {
                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ content })
                });

                // Handle non-JSON responses
                const textResponse = await response.text();
                const data = textResponse ? JSON.parse(textResponse) : {};

                if (response.ok) {
                    messageHistory.unshift({
                        id: data.id,
                        content: content,
                        status: 'sent',
                        timestamp: new Date().toLocaleString()
                    });
                    updateMessageHistory();
                    updateIdPanel();
                    document.getElementById('messageContent').value = '';
                    showNotification('Message sent successfully!', 'var(--green)');
                } else {
                    throw new Error(data.message || `HTTP error! status: ${response.status}`);
                }
            } catch (error) {
                showNotification(`Error: ${error.message}`, 'var(--red)');
            }
        }

        // Update other functions to call updateIdPanel() when modifying messageHistory
        async function editMessage() {
            // ... existing edit code ...
            if (response.ok) {
                const index = messageHistory.findIndex(msg => msg.id === messageId);
                if (index !== -1) {
                    messageHistory[index].content = content;
                    messageHistory[index].status = 'edited';
                    updateMessageHistory();
                    updateIdPanel();
                }
                // ... rest of success code ...
            }
        }

        async function deleteMessage() {
            // ... existing delete code ...
            if (response.ok) {
                const index = messageHistory.findIndex(msg => msg.id === messageId);
                if (index !== -1) {
                    messageHistory[index].status = 'deleted';
                    updateMessageHistory();
                    updateIdPanel();
                }
                // ... rest of success code ...
            }
        }
    </script>
</body>
</html>